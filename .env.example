ADMIN_BOT_TOKEN=123456:AA...
SHOP_BOT_TOKEN=123456:BB...
ADMIN_WEBHOOK_SECRET=change-me
SHOP_WEBHOOK_SECRET=change-me
ADMIN_IDS=111111111,222222222
CHANNEL_ID=-1001234567890
BUYER_MINIAPP_SHORT_NAME=buyer
TELEGRAM_INIT_DATA_MAX_AGE_SEC=86400
# DEFAULT_MERCHANT_ID=default
# multi-merchant not enabled yet; only "default" is supported
LINK_TOKEN_SECRET=change-me
LINK_RESOLVE_RL_MAX=10
LINK_RESOLVE_RL_WINDOW_SEC=10
USER_RESOLVE_RL_MAX=30
USER_RESOLVE_RL_WINDOW_SEC=10
USER_ADD_RL_MAX=20
USER_ADD_RL_WINDOW_SEC=10
USER_CLAIM_RL_MAX=5
USER_CLAIM_RL_WINDOW_SEC=60
CART_UNDO_TTL_SEC=300
CART_ADD_DEDUP_WINDOW_SEC=5

DATABASE_URL=jdbc:postgresql://localhost:5432/shopdb
DATABASE_USER=shopuser
DATABASE_PASSWORD=shoppass

REDIS_URL=redis://localhost:6379

LOG_LEVEL=INFO
LOG_JSON=true
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
METRICS_BASIC_AUTH=
METRICS_IP_ALLOWLIST=
METRICS_TRUSTED_PROXY_ALLOWLIST=
# METRICS_BASIC_AUTH=metrics:changeme
# METRICS_IP_ALLOWLIST=127.0.0.1,10.0.0.0/8,::1
# METRICS_TRUSTED_PROXY_ALLOWLIST=127.0.0.1,10.0.0.0/8,::1
HEALTH_DB_TIMEOUT_MS=500
HEALTH_REDIS_TIMEOUT_MS=500

OUTBOX_ENABLED=true
OUTBOX_POLL_INTERVAL_MS=500
OUTBOX_BATCH_SIZE=50
OUTBOX_MAX_ATTEMPTS=10
OUTBOX_BASE_BACKOFF_MS=500
OUTBOX_MAX_BACKOFF_MS=60000
OUTBOX_PROCESSING_TTL_MS=600000

PUBLIC_BASE_URL=https://your.domain
OFFERS_EXPIRE_SWEEP_SEC=30
OFFER_RESERVE_TTL_SEC=900
ORDER_RESERVE_TTL_SEC=1800
RESERVES_SWEEP_SEC=60
RESERVE_STOCK_LOCK_SEC=5
WATCHLIST_PRICE_DROP_ENABLED=true
PRICE_DROP_NOTIFY_COOLDOWN_SEC=86400
PRICE_DROP_MIN_ABS_MINOR=0
PRICE_DROP_MIN_REL_PCT=0
WATCHLIST_RESTOCK_ENABLED=true
RESTOCK_NOTIFY_COOLDOWN_SEC=172800
RESTOCK_NOTIFY_CONSUME=true
RESTOCK_SCAN_SEC=60
PROVIDER_TOKEN=TEST:12345
INVOICE_CURRENCY=RUB
SHIPPING_ENABLED=true
SHIPPING_REGION_ALLOWLIST=RU
SHIPPING_BASE_STD_MINOR=30000
SHIPPING_BASE_EXP_MINOR=60000
PAYMENTS_ALLOW_TIPS=true
PAYMENTS_TIP_SUGGESTED=5000,10000,20000
PAYMENTS_DETAILS_KEY_B64=base64-32-bytes-secret

STORAGE_ENDPOINT=https://s3.example.com
STORAGE_REGION=us-east-1
STORAGE_BUCKET=shop-storage
STORAGE_ACCESS_KEY=access-key
STORAGE_SECRET_KEY=secret-key
STORAGE_PRESIGN_TTL_SEC=300
# STORAGE_PATH_PREFIX=orders

FX_DISPLAY_CURRENCIES=RUB,USD,EUR,USDT_TS
FX_REFRESH_INTERVAL_SEC=1800
# optional stub rates (micro scale = 1_000_000)
# FX_RATE_USD_RUB=96500000
# FX_RATE_EUR_RUB=105000000
# FX_RATE_USD_EUR=925000

RETENTION_PURGE_ENABLED=true
RETENTION_PURGE_INTERVAL_HOURS=24
RETENTION_AUDIT_LOG_DAYS=30
RETENTION_ORDER_DELIVERY_DAYS=180
RETENTION_OUTBOX_DAYS=30
RETENTION_WEBHOOK_DEDUP_DAYS=30
RETENTION_IDEMPOTENCY_DAYS=14
